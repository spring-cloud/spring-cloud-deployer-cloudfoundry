= Spring Cloud Deployer for Cloud Foundry image:https://build.spring.io/plugins/servlet/buildStatusImage/SCD-DCF[Build Status, link=https://build.spring.io/browse/SCD-DCF] image:https://badge.waffle.io/spring-cloud/spring-cloud-deployer-cloudfoundry.svg?label=ready&title=Ready[Stories Ready, link=http://waffle.io/spring-cloud/spring-cloud-deployer-cloudfoundry] image:https://badge.waffle.io/spring-cloud/spring-cloud-deployer-cloudfoundry.svg?label=In%20Progress&title=In%20Progress[Stories In Progress, link=http://waffle.io/spring-cloud/spring-cloud-deployer-cloudfoundry]

This project provides a common means to deploy applications to Cloud Foundry based on the Spring Cloud Deployer SPI.

== Building

Clone the repo and type

----
$ ./mvnw clean install
----

The project includes a set of integration tests that can be run against a Cloud Foundry installation, provided that
connection information is correctly set. If credentials are not set correctly, those tests will be silently skipped.
Below is a short list of common Spring Boot @ConfigurationProperties (in environment variable format) that you will need to set in order to deploy applications to Cloud Foundry:

----
# url of the CF API (used when using cf login -a for example)
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_URL

# name of the space into which modules will be deployed
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_SPACE

# name of the organization that owns the space above
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_ORG

# the root domain to use when mapping routes
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_DOMAIN

# Comma separated set of service instance names to bind to the deployed app
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_SERVICES

# username and password of the user to use to create apps
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_USERNAME
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_PASSWORD

# whether to allow self-signed certificates during SSL validation
SPRING_CLOUD_DEPLOYER_CLOUDFOUNDRY_SKIP_SSL_VALIDATION
----

Refer to https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry/blob/master/src/main/java/org/springframework/cloud/deployer/spi/cloudfoundry/CloudFoundryDeployerProperties.java[CloudFoundryDeployerProperties] for a complete listing.

The deployer also supports setting the properties `spring-cloud-deployer-cloudfoundry-services`,
`spring-cloud-deployer-cloudfoundry-memory`, and `spring-cloud-deployer-cloudfoundry-disk` as part of an individual
deployment request.

In addition, you can override the standard `spring.application.name` spring boot property to prefix the stream app
deployments. In that case it will be followed by a random adjective, noun, stream and app names. You can bypass the
generation of random adjective and noun by setting a property called `appPrefix` in which case this will
be followed by stream and app names. Otherwise, a prefix of `dataflow` will be used which is followed by random adjective and noun.
The prefixing of app deployment with a unique id is enabled by default. This can be disabled by setting `appPrefixEnabled` to false.
